---
import '../../style/contact.css';
import Layout from '../../layouts/Layout.astro';
---
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Krona+One&display=swap" rel="stylesheet">

<Layout>
<section class="contact-section">
  <h2 class="contact-title">CONTACT</h2>
  <h3 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 2rem;">Your next project starts here</h3>
  <form class="contact-form" id="contactForm" action="https://formspree.io/f/movyqkdj" method="POST">
    <label>
      Name:
      <input type="text" name="name" placeholder="Santiago Suarez" required/>
    </label>
    <label>
      Email:
      <input type="email" name="email" placeholder="example@gmail.com" required/>
    </label>
    <label>
      Phone number:
      <input type="tel" name="phone" placeholder="+54 9 11 1234-5678" required/>
    </label>
    <label>
      Message:
      <textarea name="message" placeholder="Write your message here" required></textarea>
    </label>
    <button type="submit" id="submitBtn">SEND NOW</button>
    <div id="formStatus" style="margin-top: 1rem; text-align: center; font-weight: bold;"></div>
  </form>
</section>

<script>
  const form = document.getElementById('contactForm') as HTMLFormElement;
  const submitBtn = document.getElementById('submitBtn') as HTMLButtonElement;
  const formStatus = document.getElementById('formStatus') as HTMLDivElement;

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    // Deshabilitar botón durante el envío
    submitBtn.disabled = true;
    submitBtn.textContent = 'SENDING...';
    formStatus.textContent = '';
    formStatus.style.color = '';

    const formData = new FormData(form);

    try {
      const response = await fetch(form.action, {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      });

      if (response.ok) {
        formStatus.textContent = '✓ Message sent successfully!';
        formStatus.style.color = '#4CAF50';
        form.reset();
      } else {
        throw new Error('Error sending message');
      }
    } catch (error) {
      formStatus.textContent = '✗ Error sending message. Please try again.';
      formStatus.style.color = '#f44336';
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = 'SEND NOW';
    }
  });
</script>
</Layout>